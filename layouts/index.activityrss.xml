{{- $site := .Site -}}
{{- $posts := where $site.RegularPages "Section" "posts" -}}
{{- $items := first 20 ($posts.ByDate.Reverse) -}}
{{- $base := strings.TrimSuffix "/" $site.BaseURL -}}
<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>{{ $site.Title }} â€“ Activity</title>
    <link>{{ $base }}/</link>
    <description>{{ with $site.Params.activityDescription }}{{ . }}{{ else }}Latest shipping logs, essays, and experiments from {{ $site.Params.author }}.{{ end }}</description>
    <language>{{ $site.Language.Lang }}</language>
    <lastBuildDate>{{ now.UTC.Format "Mon, 02 Jan 2006 15:04:05 -0700" }}</lastBuildDate>
    <atom:link rel="self" href="{{ $base }}/activity.xml" type="application/rss+xml" />
    {{ range $items }}
    <item>
      <title>{{ .Title }}</title>
      <link>{{ .Permalink }}</link>
      <guid>{{ .Permalink }}</guid>
      <pubDate>{{ .Date.UTC.Format "Mon, 02 Jan 2006 15:04:05 -0700" }}</pubDate>
      <description><![CDATA[{{ with .Description }}{{ . }}{{ else }}{{ .Summary }}{{ end }}]]></description>
    </item>
    {{ end }}
  </channel>
</rss>
