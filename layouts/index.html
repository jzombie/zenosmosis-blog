{{ define "main" }}
  {{ $posts := (where .Site.RegularPages "Section" "posts") }}
  <section class="hero">
    <p class="eyebrow">zenOSmosis · builder's log</p>
    <h1>{{ .Title }}</h1>
    <div class="hero__lead">
      {{ .Content }}
    </div>
    <div class="hero__cta">
      <a class="button" href="/posts/">Browse all posts</a>
      <button class="button button--ghost" type="button" data-search-open>Search notes</button>
      <a class="button button--ghost" href="mailto:info@zenosmosis.com">Say hello</a>
    </div>
  </section>

  <section class="layout-grid">
    <div class="post-feed">
      <div class="section-heading">
        <h2>Latest notes</h2>
        <a href="/posts/" class="see-all">View archive →</a>
      </div>
      {{ if gt (len $posts) 0 }}
        {{ range first 4 ($posts.ByDate.Reverse) }}
          <article class="post-card">
            <p class="post-card__meta">{{ .Date.Format "02 Jan 2006" }} · {{ .ReadingTime }} min read</p>
            <h3><a href="{{ .RelPermalink }}">{{ .Title }}</a></h3>
            <p>{{ with .Description }}{{ . }}{{ else }}{{ .Summary }}{{ end }}</p>
            <div class="post-card__tags">
              {{ with .Params.tags }}
                {{ range first 3 . }}<span>#{{ . }}</span>{{ end }}
              {{ end }}
            </div>
            <a class="post-card__cta" href="{{ .RelPermalink }}">Read more</a>
          </article>
        {{ end }}
      {{ else }}
        <p>No posts yet. Add some under <code>content/posts/</code>.</p>
      {{ end }}
    </div>

    <aside class="sidebar">
      <section class="panel">
        <h3>About</h3>
        <p>I'm {{ .Site.Params.author }}, experimenting with setting up this blog.</p>
      </section>

      <!-- <section class="panel">
        <h3>Currently exploring</h3>
        <ul>
          <li>Shipping static sites from containers</li>
          <li>Human-friendly observability dashboards</li>
          <li>Personal search tooling</li>
        </ul>
      </section> -->

      <section class="panel">
        <h3>Elsewhere</h3>
        <ul>
          <li><a href="https://zenosmosis.com" target="_blank" rel="noopener">Web</a></li>
          <li><a href="https://github.com/zenosmosis" target="_blank" rel="noopener">GitHub</a></li>
          <li><a href="https://www.linkedin.com/in/jeremyharrisconsultant/" target="_blank" rel="noopener">LinkedIn</a></li>
          <li><a href="mailto:info@zenosmosis.com">Email</a></li>
        </ul>
      </section>
    </aside>
  </section>
{{ end }}
