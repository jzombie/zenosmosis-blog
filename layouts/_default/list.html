{{ define "main" }}
  <section class="page-header">
    <p class="eyebrow">Archive</p>
    {{ $pageTitle := .Title }}
    {{ if and (eq .Kind "term") (eq .Data.Singular "tag") }}
      {{ $pageTitle = printf "#%s" .Title }}
    {{ end }}
    <h1>{{ $pageTitle }}</h1>
    {{ with .Content }}<div class="page-header__lead">{{ . }}</div>{{ end }}
  </section>

  <section class="post-feed post-feed--list">
    {{ range .Pages.ByDate.Reverse }}
      <article class="post-card">
        <p class="post-card__meta">{{ .Date.Format "02 Jan 2006" }} Â· {{ .ReadingTime }} min read</p>
        <h3><a href="{{ .RelPermalink }}">{{ .Title }}</a></h3>
        <p>{{ with .Description }}{{ . }}{{ else }}{{ .Summary }}{{ end }}</p>
        <div class="post-card__tags">
          {{ range .Params.tags }}
            {{ $tagURL := printf "/tags/%s/" (urlize .) }}
            <a href="{{ $tagURL }}" rel="tag">#{{ . }}</a>
          {{ end }}
        </div>
        <a class="post-card__cta" href="{{ .RelPermalink }}">Read more</a>
      </article>
    {{ end }}
  </section>
{{ end }}
